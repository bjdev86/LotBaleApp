<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Bale Editor</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="./CSS/formstyle.css">
    </head>
    <body>
        
    <!-- Header Row -->
    <div class="row">
        <div class="header1">
            <p>
                Bale Editor
            </p>
        </div><!--header1-->
        <div class="header2">
            <p>
                Use this form to edit hop bale information. Error checking is enabled. Data is immediately and automatically sent to the database server after it is entered.  
            </p>
        </div><!--header2-->
    </div><!--row-->
    
    <!--Div container for the form. Creating a responsive form. The form will
        be organized in a grid pattern with rows and columns-->    
    <div class="container">
        <form id="mainForm">

        <!--Row 1-->
        <div class="row">
            <!--Col 1 @ 25%-->
            <div class="col-25"> 
               <!-- No content in the first colum of the first row -->
            </div>
            <!--Col 2 @ 75%-->
            <div class="col-75" tabindex="0">
                
                <!-- Create two divs in this column to allow for the positioning
                     and sizing of the selector and its label -->
                <div style="float: left; width: 70%"> <!-- Label div -->
                    <label class="fdlabel" style="float: right"> Lot Number: </label>
                </div> 
                
                <div style="float: right; width: 30%"> <!-- Select div -->
                    <select id="lot" class = "slctr">                    
                    </select>
                    <!--<label id="lotError" class="errorMsg"></label><br/>-->
                </div>
            </div>
        </div>
        
        <!--Row 2-->
        <div class="row">
            <!--Col 1 @ 25%-->
            <div class="col-25"> 
                <label class="fdlabel"> Bale ID: </label> 
            </div>
            <!--Col 2 @ 75%-->
            <div class="col-75" tabindex="1">
                <div id="baleID" class="txtfld" contenteditable="true" 
                    onkeypress="filterEnter(window.event)"></div>
                <label id="baleIDError" class="errorMsg"></label><br/>
                <label> May contain between 1-2 digits </label>
            </div>
        </div>
        
        <!--Row 3-->
        <div class="row">
            <!--Col 1 @ 25%-->
            <div class="col-25"> 
                <label class="fdlabel"> Field ID: </label> 
            </div>
            <!--Col 2 @ 75%-->
            <div class="col-75" >
                <div id="fieldID" class="txtfld" contenteditable="true" 
                     onkeypress="filterEnter(window.event)"></div>
                <label id="fieldIDError" class="errorMsg"></label><br/>
                <label> Must contain 2 digits </label>
            </div>
        </div> 
        
        <!--Row 4-->
        <div class="row">
            <!--Col 1 @ 25%-->
            <div class="col-25"> 
                <label for="facilityID" class="fdlabel"> Facility ID: </label> 
            </div>
            <!--Col 2 @ 75%-->
            <div class="col-75">
                <div id="facilityID" class="txtfld" contenteditable="true" 
                     onkeypress="filterEnter(window.event)"></div>
                <label id="facilityIDError" class="errorMsg"></label><br/>
                <label> Must contain 2 digits </label>
            </div>
        </div> 
        
        <!--Row 5-->
        <div class="row">
            <!--Col 1 @ 25%-->
            <div class="col-25"> 
                <label for="lotNumber" class="fdlabel"> Lot Number: </label>
            </div>
            <!--Col 2 @ 75%-->
            <div class="col-75">
                 <div id="lotNumber" class="txtfld" contenteditable="true" 
                     onkeypress="filterEnter(window.event)"></div>
                <label id="lotNumberError" class="errorMsg"></label><br/>
                <label> Must be "OR########" </label>
            </div>
        </div> 
        
        <!--Row 6-->
        <div class="row">
            <!--Col 1 @ 25%-->
            <div class="col-25"> 
                <label for="weight" class="fdlabel"> Bale Weight: </label>
            </div>
            <!--Col 2 @ 75%-->
            <div class="col-75">
                 <div id="weight" class="txtfld" contenteditable="true" 
                     onkeypress="filterEnter(window.event)"></div>
                <label id="weightError" class="errorMsg"></label><br/>
                <label> Must be "###" lbs or kgs </label>
            </div>
        </div> 
        
        <!--Row 7-->
        <div class="row">
            <!--Col 1 @ 25%-->
            <div class="col-25"> 
                <label class="fdlabel"> Dry Material: </label>
            </div>
            <!--Col 2 @ 75%-->
            <div class="col-75">
                <div id="dryMat" class="txtfld" contenteditable="true" 
                     onkeypress="filterEnter(window.event)"></div>
               <label id="dryMatError" class="errorMsg"></label><br/>
               <label> Must be "##%"</label>
            </div>
        </div>
        
        <!--Row 8-->
        <div class="row">
            <!--Col 1 @ 25%-->
            <div class="col-25"> 
                <label class="fdlabel"> Hop Variety: </label> 
            </div>
            <!--Col 2 @ 75%-->
            <div class="col-75">
                <select id="hopVariety" class="txtfld">
                    <option id="---" value="---">---</option>
                    <option id="cas" value="cas">CAS</option>
                    <option id="sim" value="sim">SIM</option>
                    <option id="mos" value="mos">MOS</option>
                    <option id="stt" value="stt">STT</option>
                </select>
                <label id="hopVarietyError" class="errorMsg"></label><br/>
            </div>
        </div>
        
        <!--Row 9-->
        <div class="row">
            <!--Col 1 @ 25%-->
            <div class="col-25"> 
                <label class="fdlabel"> Date Baled: </label>
            </div>
            <!--Col 2 @ 75%-->
            <div class="col-75">
                 <!--<div id="dateBaled" class="txtfld" contenteditable="true" 
                     onkeypress="filterEnter(window.event)"></div>-->
                <input type="datetime-local" id="dateBaled" class="txtfld">
                <label id="dateBaledError" class="errorMsg"></label><br/>
            </div>
        </div>
        
        <!--Row 10-->
        <div class="row">
            <!--Col 1 @ 25%-->
            <div class="col-25"> 
                <label class="fdlabel"> Notes: </label> 
            </div>
            <!--Col 2 @ 75%-->
            <div class="col-75">
                <div id="notes" class="txtfld" contenteditable="true">Notes</div>
                 <label id="notesError" class="errorMsg"></label><br/>
            </div>
        </div>
        
        <!--Row 11-->
        <div class="row">
            <!--Col 1 @ 25% on left side of button bank-->
            <div class="col-25">
                
            </div>
            
            <!--Col 2 @ 12% for each button-->
            <div class="col-75">
               
                <input type="button" value="GoTo Lot" name="goToBale" aria-disabled="true"/>
                <input type="button" value="Add New Bale" name="nwBaleButton"/>
                <input type="button" value="Delete Bale" name="dltBaleButton"/>                 
                <input type="button" value=">>" name="next"/>
                <input type="button" value="<<" name="previous"/>
            </div>
        </div>
                        
        </form>
    </div>
        
    <!-- Footer -->
    <div class="row">
        <div class="footer col-75">
            <p>
                Please remember that this application was left UNFINISHED. As such certain features don't work. The following list describes how each button should be used and how it works. 
            </p>
            <!-- List of buttons and how they work. -->
            <ul style="text-align: left;">
                <li>
                    "<<" Go back to the previous bale. Bales are indexed by "BaleID".
                </li></br>
                <li>
                    ">>" Go to the next bale. 
                </li></br>
                <li>
                    "Delete Bale" Removes the bale from the database.
                </li></br>
                <li>
                    "Add Bale" Adds a new bale, automatically, to the database. The baleID for the new bale is calculated by the server. 
                </li></br>
                <li>
                    "GoTo Lot" This button is disabled. When enabled it will allow the user to go to the "Lot Editor" form, so edits to the lot data can be made. 
                </li></br>
                <li>
                    "Lot Number" This drop down list is disabled. When enabled it will allow the user to select a lot of hop bales to be loaded into this application to be edited.
                </li></br>
            </ul> <!-- button list -->
            <p>
                The following is a list of current issues and some work arounds: 
            </p>
            <ul style="text-align: left;">
                <li>
                    The connection to the websocket server times out. After about a minute of inactivity the websocket connection to the server will automatically close. Refreshing this page will restablish the connection. 
                </li></br>
                <li>
                    Error handling messages related to data entry text fields appear when incorrectly formated data is entered. However, error handling messages do not automatically disappear when incorrectly formatted data is corrected.   
                </li></br>
                <li>
                    The "Date Baled" entry field was coded with a "HTML5 Date Picker" that is not rendered in Firefox for some reason. The picker will display correctly in Chrome. 
                </li></br>
            </ul> <!-- Issue list -->
        </div> <!-- footer row -->
    </div><!-- row -->

        <script>
            
            // Function to filter out enter key presses
            function filterEnter(event)
            {
                if (event.key === "Enter")
                {
                    event.preventDefault();
                }
            } 
            
        </script>
        
        <!--Script to connect the mainForm to a UIHandler that will connect it 
            to the controller for this application-->
        <script type="module">
            
            // Import BaleEditorUIHandler
            import {BaleEditorUIHandler} from "../UIHandlers/BaleEditorUIHandler.js"; 
            
            // Create a new BaleEditorUIHandler to handle bale editing events
            const uiHandler = new BaleEditorUIHandler (window.document.getElementById("mainForm"));
            
            // Bind the button listeners to the buttons on this editor form
            uiHandler.bindUI(); 
            
        </script>
    </body>
</html>
